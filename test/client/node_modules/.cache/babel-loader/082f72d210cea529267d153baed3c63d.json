{"ast":null,"code":"var _jsxFileName = \"/Users/jaehookim/Desktop/codeStates/BongSa-Haeven/test/client/src/components/App.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Route } from \"react-router-dom\";\nimport { useHistory } from \"react-router\";\nimport axios from \"axios\"; // import kakaologo from \"./kakaologo.png\";\n\nimport google from \"./google.png\";\nimport \"../App.css\";\nimport Upload from \"./uploading\";\nimport KakaoKill from \"./KakaoKill\";\nimport KakaoTest from \"./KakaoTest\";\nimport Google from \"./google\"; // import KakaoLogin from \"./KakaoLogin\";\n\nimport googleLogin from \"react-google-login\";\naxios.defaults.withCredentials = true;\nexport default function App() {\n  const [data, setData] = useState(null);\n  const history = useHistory();\n\n  const GoKakaoTest = () => {\n    history.push(\"/KakaoTest\");\n  };\n\n  const url = window.location.href;\n  const arr = url.split(\"=\");\n  const [userinfo, setuserinfo] = useState({\n    email: \"\",\n    nickname: \"\",\n    password: \"\",\n    sex: \"\",\n    want_region: \"\",\n    want_vol: \"\",\n    age: \"\"\n  });\n  const [imag, setImge] = useState(\"\");\n\n  const handleInputValue = key => e => {\n    setuserinfo({ ...userinfo,\n      [key]: e.target.value\n    });\n  };\n\n  const handleSignUp = () => {\n    const email = userinfo.email;\n    const nickname = userinfo.nickname;\n    const password = userinfo.password;\n    const sex = userinfo.sex;\n    const want_region = userinfo.want_region;\n    const want_vol = userinfo.want_region;\n    const age = userinfo.age;\n    console.log(\"Im UserInfo\", userinfo);\n    axios.post(\"http://localhost:8080/auth/signup\", {\n      email: email,\n      nickname: nickname,\n      password: password,\n      sex: sex,\n      want_region: want_region,\n      want_vol: want_vol,\n      age: age\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      withCredentials: true\n    }).then(res => {\n      console.log(\"res\");\n    }).catch(err => {\n      console.log(\"err\");\n    });\n  };\n\n  const handleSignIn = () => {\n    console.log(\"handleSignIn\");\n    const email = userinfo.email;\n    const password = userinfo.password;\n    console.log(\"Im UserInfo\", userinfo);\n    axios.post(\"http://localhost:8080/auth/signin\", {\n      email: email,\n      password: password\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      withCredentials: true\n    }).then(res => {\n      const accessToken = res.data.accessToken;\n      console.log(\"===res.data===\", res.data);\n      console.log(accessToken);\n      handleResponseSuccess(accessToken);\n    }).catch(err => {\n      console.log(\"err\");\n    });\n  };\n\n  const handleResponseSuccess = accessToken => {\n    isAuthenticated(accessToken);\n  };\n\n  const isAuthenticated = accessToken => {\n    axios.get(\"http://localhost:8080/user/info\", {\n      accessToken\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      withCredentials: true\n    }).then(res => {\n      console.log(\"res\");\n    }).catch(err => {\n      console.log(\"err\");\n    });\n  };\n\n  useEffect(() => {\n    //   //http://~~~~(?#) 전까지 가져온다.\n    const url = new URL(window.location.href);\n    console.log(url); // console.log(url.searchParams.get);\n    //   //   //params code를 가져오는 경우\n    // const authorizationCode = url.searchParams.get(\"code\");\n    // console.log(authorizationCode);\n\n    const hash = url.hash;\n\n    if (hash) {\n      const accessToken = hash.split(\"=\")[1].split(\"&\")[0];\n      axios.post(\"http://localhost:8080/auth/google\", {\n        authorization: `token ${accessToken}`,\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        withCredentials: true\n      }).then(data => {\n        console.log(data); // setData(data);\n      }).catch(e => console.log(\"oAuth token expired\"));\n    } // code를 가지고 accesstoken 요청\n    // const accessToken = .split(\"=\")[1].split(\"&\")[0];\n    // console.log(accessToken);\n    //서버에 코드를 보내고 서버에서 코드를 받아서 accesstoken 발급\n\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"test_box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Upload, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"test_box_box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    placeholder: \"email\",\n    onChange: handleInputValue(\"email\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"nickname\",\n    onChange: handleInputValue(\"nickname\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    placeholder: \"password\",\n    onChange: handleInputValue(\"password\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"sex\",\n    onChange: handleInputValue(\"sex\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"want_region\",\n    onChange: handleInputValue(\"want_region\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"want_vol\",\n    onChange: handleInputValue(\"want_vol\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"age\",\n    onChange: handleInputValue(\"age\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSignUp,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 9\n    }\n  }, \"Auth/SignUp[Post]\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"test_box_box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    placeholder: \"email\",\n    onChange: handleInputValue(\"email\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    placeholder: \"password\",\n    onChange: handleInputValue(\"password\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSignIn,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 9\n    }\n  }, \"Auth/SignIn[Post]\")), /*#__PURE__*/React.createElement(Google, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: GoKakaoTest,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }\n  }, \"\\uCE74\\uCE74\\uC624 \\uBA78\\uB9DD\\uC804\"), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/KakaoTest\",\n    component: KakaoTest,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/KakoKill\",\n    component: KakaoKill,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/jaehookim/Desktop/codeStates/BongSa-Haeven/test/client/src/components/App.js"],"names":["React","useState","useEffect","Route","useHistory","axios","google","Upload","KakaoKill","KakaoTest","Google","googleLogin","defaults","withCredentials","App","data","setData","history","GoKakaoTest","push","url","window","location","href","arr","split","userinfo","setuserinfo","email","nickname","password","sex","want_region","want_vol","age","imag","setImge","handleInputValue","key","e","target","value","handleSignUp","console","log","post","headers","then","res","catch","err","handleSignIn","accessToken","handleResponseSuccess","isAuthenticated","get","URL","hash","authorization"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Route } from \"react-router-dom\";\nimport { useHistory } from \"react-router\";\nimport axios from \"axios\";\n// import kakaologo from \"./kakaologo.png\";\nimport google from \"./google.png\";\nimport \"../App.css\";\nimport Upload from \"./uploading\";\nimport KakaoKill from \"./KakaoKill\";\nimport KakaoTest from \"./KakaoTest\";\nimport Google from \"./google\";\n// import KakaoLogin from \"./KakaoLogin\";\nimport googleLogin from \"react-google-login\";\n\naxios.defaults.withCredentials = true;\nexport default function App() {\n  const [data, setData] = useState(null);\n\n  const history = useHistory();\n  const GoKakaoTest = () => {\n    history.push(\"/KakaoTest\");\n  };\n  const url = window.location.href;\n  const arr = url.split(\"=\");\n  const [userinfo, setuserinfo] = useState({\n    email: \"\",\n    nickname: \"\",\n    password: \"\",\n    sex: \"\",\n    want_region: \"\",\n    want_vol: \"\",\n    age: \"\",\n  });\n\n  const [imag, setImge] = useState(\"\");\n  const handleInputValue = (key) => (e) => {\n    setuserinfo({ ...userinfo, [key]: e.target.value });\n  };\n  const handleSignUp = () => {\n    const email = userinfo.email;\n    const nickname = userinfo.nickname;\n    const password = userinfo.password;\n    const sex = userinfo.sex;\n    const want_region = userinfo.want_region;\n    const want_vol = userinfo.want_region;\n    const age = userinfo.age;\n    console.log(\"Im UserInfo\", userinfo);\n    axios\n      .post(\n        \"http://localhost:8080/auth/signup\",\n        {\n          email: email,\n          nickname: nickname,\n          password: password,\n          sex: sex,\n          want_region: want_region,\n          want_vol: want_vol,\n          age: age,\n        },\n        {\n          headers: { \"Content-Type\": \"application/json\" },\n          withCredentials: true,\n        }\n      )\n      .then((res) => {\n        console.log(\"res\");\n      })\n      .catch((err) => {\n        console.log(\"err\");\n      });\n  };\n\n  const handleSignIn = () => {\n    console.log(\"handleSignIn\");\n    const email = userinfo.email;\n    const password = userinfo.password;\n\n    console.log(\"Im UserInfo\", userinfo);\n    axios\n      .post(\n        \"http://localhost:8080/auth/signin\",\n        {\n          email: email,\n          password: password,\n        },\n        {\n          headers: { \"Content-Type\": \"application/json\" },\n          withCredentials: true,\n        }\n      )\n      .then((res) => {\n        const accessToken = res.data.accessToken;\n        console.log(\"===res.data===\", res.data);\n        console.log(accessToken);\n        handleResponseSuccess(accessToken);\n      })\n      .catch((err) => {\n        console.log(\"err\");\n      });\n  };\n\n  const handleResponseSuccess = (accessToken) => {\n    isAuthenticated(accessToken);\n  };\n\n  const isAuthenticated = (accessToken) => {\n    axios\n      .get(\n        \"http://localhost:8080/user/info\",\n        { accessToken },\n        {\n          headers: { \"Content-Type\": \"application/json\" },\n          withCredentials: true,\n        }\n      )\n      .then((res) => {\n        console.log(\"res\");\n      })\n      .catch((err) => {\n        console.log(\"err\");\n      });\n  };\n\n  useEffect(() => {\n    //   //http://~~~~(?#) 전까지 가져온다.\n\n    const url = new URL(window.location.href);\n    console.log(url);\n    // console.log(url.searchParams.get);\n    //   //   //params code를 가져오는 경우\n    // const authorizationCode = url.searchParams.get(\"code\");\n\n    // console.log(authorizationCode);\n    const hash = url.hash;\n    if (hash) {\n      const accessToken = hash.split(\"=\")[1].split(\"&\")[0];\n      axios\n        .post(\"http://localhost:8080/auth/google\", {\n          authorization: `token ${accessToken}`,\n\n          headers: { \"Content-Type\": \"application/json\" },\n          withCredentials: true,\n        })\n        .then((data) => {\n          console.log(data);\n          // setData(data);\n        })\n        .catch((e) => console.log(\"oAuth token expired\"));\n    }\n    // code를 가지고 accesstoken 요청\n    // const accessToken = .split(\"=\")[1].split(\"&\")[0];\n    // console.log(accessToken);\n    //서버에 코드를 보내고 서버에서 코드를 받아서 accesstoken 발급\n  }, []);\n\n  return (\n    <div className=\"test_box\">\n      <Upload />\n      <div className=\"test_box_box\">\n        <input\n          type=\"email\"\n          placeholder=\"email\"\n          onChange={handleInputValue(\"email\")}\n        />\n        <input\n          type=\"text\"\n          placeholder=\"nickname\"\n          onChange={handleInputValue(\"nickname\")}\n        />\n        <input\n          type=\"password\"\n          placeholder=\"password\"\n          onChange={handleInputValue(\"password\")}\n        />\n        <input\n          type=\"text\"\n          placeholder=\"sex\"\n          onChange={handleInputValue(\"sex\")}\n        />\n        <input\n          type=\"text\"\n          placeholder=\"want_region\"\n          onChange={handleInputValue(\"want_region\")}\n        />\n        <input\n          type=\"text\"\n          placeholder=\"want_vol\"\n          onChange={handleInputValue(\"want_vol\")}\n        />\n        <input\n          type=\"text\"\n          placeholder=\"age\"\n          onChange={handleInputValue(\"age\")}\n        />\n        <button onClick={handleSignUp}>Auth/SignUp[Post]</button>\n      </div>\n      <div className=\"test_box_box\">\n        <input\n          type=\"email\"\n          placeholder=\"email\"\n          onChange={handleInputValue(\"email\")}\n        />\n        <input\n          type=\"password\"\n          placeholder=\"password\"\n          onChange={handleInputValue(\"password\")}\n        />\n        <button onClick={handleSignIn}>Auth/SignIn[Post]</button>\n      </div>\n      <Google />\n      <button onClick={GoKakaoTest}>카카오 멸망전</button>\n      <Route exact path=\"/KakaoTest\" component={KakaoTest} />\n      <Route exact path=\"/KakoKill\" component={KakaoKill} />\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}